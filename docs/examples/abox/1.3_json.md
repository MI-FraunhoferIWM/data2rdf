# ABox generation from a json file or Python-dict with metadata and time series

```{note}
This example is building up on the very first one about the [CSV file with metadata and time series](1.1_csv.md).
Please start from this chapter in order to fully understand the content of this example.
```
## General understanding

Typically, data can also be provided in the serialization of a json file, which ulimately can be parsed in to a dict object in Python.

In this section, we would like to showcase how to write a mapping for a json file with metadata and time series. The content of the json can be nested into an arbitrary depth.

## The input data

In this example we will need only two inputs:

* the json file produced by the tensile test machine
* the mapping for describing the data in RDF

We generally do not need parser arguments at this point, since we are using the `json` parser. However, setting the `encoding` in the `config`-argument in the pipeline might be needed in case of any special characaters in the json file. Please for refer to the [Additional configuration](../config.md) for more details.

### The raw data

We are considering the following dummy data as json input:

```{json}
raw_data = {
  "data": {
    "Breitenänderung": {
      "unit": "mm",
      "value": 1.0
    },
    "Dehnung": [
      1.0,
      2.0,
      3.0
    ],
    "Standardkraft": {
      "array": [
        2.0,
        3.0,
        4.0
      ],
      "unit": "kN"
    }
  },
  "details": {
    "Bemerkungen": "foobar"
  }
}
```

As you may notice, concepts like `Breitenänderung` and `Dehnung` both are time series with slighly different key-patters: `Standardkraft` is a dictionary/object with an additional subelement called `array` for the values and `unit` for the unit, whereas the `Dehnung` key directly has a list of values and no reference for the unit.

## The mapping

A valid mapping for the json defined above may look like this:

```{json}
[
  {
    "iri": "https://w3id.org/steel/ProcessOntology/Remark",
    "key": "Bemerkungen",
    "value_location": "details.Bemerkungen"
  },
  {
    "iri": "https://w3id.org/steel/ProcessOntology/WidthChange",
    "key": "Breitenaenderung",
    "unit": "data.Breitenaenderung.unit",
    "value_location": "data.Breitenaenderung.value"
  },
  {
    "iri": "https://w3id.org/steel/ProcessOntology/PercentageElongation",
    "key": "Dehnung",
    "unit": "%",
    "value_location": "data.Dehnung"
  },
  {
    "iri": "https://w3id.org/steel/ProcessOntology/Force",
    "key": "Standardkraft",
    "unit_location": "data.Standardkraft.unit",
    "value_location": "data.Standardkraft.array"
  }
]
```

Please note that we are using a querying-language called [`jsonpath`](https://support.smartbear.com/alertsite/docs/monitors/api/endpoint/jsonpath.html) in order to extract the data at its specific location.

For example, we can specify the `key` as `data.Standardkraft.unit` and the `value_location` as `data.Standardkraft.array`, since we have seen that the `Standardkraft` concept is a dictionary/object with an additional subelement called `array` for the values and `unit` for the unit:

```{json}
...
  {
    "iri": "https://w3id.org/steel/ProcessOntology/Force",
    "key": "Standardkraft",
    "unit_location": "data.Standardkraft.unit",
    "value_location": "data.Standardkraft.array"
  }
...
´´´

In the case of the `Dehnung` concept, we can specify the `key` as `data.Dehnung` and manually map the `unit` to `%`, since we cannot extract the information from the data:

```{json}
...
  {
    "iri": "https://w3id.org/steel/ProcessOntology/PercentageElongation",
    "key": "Dehnung",
    "unit": "%",
    "value_location": "data.Dehnung"
  }
...
```

## Next steps

Please go to the next section for investigating more pipeline usecases or go to the [Run pipeline and retrieve outputs](3_pipeline_run_and_outputs) section for more details how to run the pipeline with the given setup.
